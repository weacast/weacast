(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{464:function(e,t,a){"use strict";a.r(t);var r=a(5),s=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"alert-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alert-plugin"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://github.com/weacast/weacast-alert",target:"_blank",rel:"noopener noreferrer"}},[e._v("Alert plugin"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("Alerts are user-defined conditions automatically and continuously evaluated on streamed probe results as new forecast data are gathered. It can be viewed as an automated query of the "),t("RouterLink",{attrs:{to:"/api/probe.html"}},[e._v("Probe results API")]),e._v(" that will raise an event whenever a matching result is found. With alert you can create triggers which will fire on an occurrence of the selected weather conditions (temperature, humidity, pressure, etc.) in a specified period of time and area.")],1),e._v(" "),t("h2",{attrs:{id:"alerts-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alerts-api"}},[e._v("#")]),e._v(" Alerts API")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("On the client/server side the API is exposed using the "),t("a",{attrs:{href:"https://docs.feathersjs.com/api/client.html#universal-isomorphic-api",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers isomorphic API"),t("OutboundLink")],1),e._v("and the "),t("a",{attrs:{href:"https://docs.feathersjs.com/api/databases/querying.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers common database query API"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("The plugin exposes the available probes through the "),t("code",[e._v("alerts")]),e._v(" service. Although only web sockets are usually used on the client side, both the "),t("a",{attrs:{href:"https://docs.feathersjs.com/api/rest.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("REST"),t("OutboundLink")],1),e._v(" and the "),t("a",{attrs:{href:"https://docs.feathersjs.com/api/socketio.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Socket"),t("OutboundLink")],1),e._v(" interfaces are configured.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[t("code",[e._v("update")]),e._v(", "),t("code",[e._v("patch")]),e._v(" methods are not allowed on alerts for now, you will have to recreate an alert to update it.")])]),e._v(" "),t("h3",{attrs:{id:"data-model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data-model"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),t("p",[e._v("The common data model of an alert as used by the API is "),t("RouterLink",{attrs:{to:"/architecture/data-model-view.html#alert-data-model"}},[e._v("detailed here")]),e._v(".")],1),e._v(" "),t("h3",{attrs:{id:"create-an-alert"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-an-alert"}},[e._v("#")]),e._v(" Create an alert")]),e._v(" "),t("p",[t("strong",[e._v("Coming soon !")])]),e._v(" "),t("h3",{attrs:{id:"remove-an-alert"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#remove-an-alert"}},[e._v("#")]),e._v(" Remove an alert")]),e._v(" "),t("p",[t("strong",[e._v("Coming soon !")])]),e._v(" "),t("h2",{attrs:{id:"alert-hooks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alert-hooks"}},[e._v("#")]),e._v(" Alert hooks")]),e._v(" "),t("p",[e._v("The following hooks are executed on the alert service.")]),e._v(" "),t("h3",{attrs:{id:"marshallalert-hook-source"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#marshallalert-hook-source"}},[e._v("#")]),e._v(" .marshallAlert(hook) "),t("a",{attrs:{href:"https://github.com/weacast/weacast-alert/blob/master/src/hooks/alerting.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v('Convert from server side types (moment dates) to basic JS types when "writing" to DB adapters. Because conditions contains Mongo reserved keywords they will be serialized as well.')]),e._v(" "),t("h3",{attrs:{id:"unmarshallalert-hook-source"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unmarshallalert-hook-source"}},[e._v("#")]),e._v(" .unmarshallAlert(hook) "),t("a",{attrs:{href:"https://github.com/weacast/weacast-alert/blob/master/src/hooks/alerting.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v('Convert back to server side types (moment dates) from basic JS types when "reading" from DB adapters. Will unserialize conditions as well.')])])}),[],!1,null,null,null);t.default=s.exports}}]);