(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{470:function(e,t,r){"use strict";r.r(t);var a=r(5),o=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"hooks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),t("p",[e._v("Weacast "),t("a",{attrs:{href:"https://github.com/weacast/weacast",target:"_blank",rel:"noopener noreferrer"}},[e._v("core module"),t("OutboundLink")],1),e._v(" provides a collection of common "),t("a",{attrs:{href:"https://docs.feathersjs.com/api/hooks.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("hooks"),t("OutboundLink")],1),e._v(" to be used by plugins or "),t("a",{attrs:{href:"https://docs.feathersjs.com/api/client.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("client applications"),t("OutboundLink")],1),e._v(". They also rely on "),t("a",{attrs:{href:"https://docs.feathersjs.com/api/hooks-common.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers common hooks"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://docs.feathersjs.com/api/hooks.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Hooks"),t("OutboundLink")],1),e._v(" are the main way to introduce business logic into applications and plugins so we recommend to understand them well first before reading this.")])]),e._v(" "),t("h2",{attrs:{id:"data-model-management"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data-model-management"}},[e._v("#")]),e._v(" Data model management")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/weacast/weacast/packages/core/blob/master/src/hooks/marshall.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"marshall-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#marshall-hook"}},[e._v("#")]),e._v(" .marshall(hook)")]),e._v(" "),t("p",[e._v("Converts from server side types (e.g. moment dates) to basic JS types, which is usually required when writing to the database.")]),e._v(" "),t("h3",{attrs:{id:"unmarshall-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unmarshall-hook"}},[e._v("#")]),e._v(" .unmarshall(hook)")]),e._v(" "),t("p",[e._v("Converts back to server side types (e.g. moment dates) from basic JS types, which is usually required when reading from the database.")]),e._v(" "),t("h2",{attrs:{id:"query-management"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query-management"}},[e._v("#")]),e._v(" Query management")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/weacast/weacast/packages/core/blob/master/src/hooks/query.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"marshallquery-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#marshallquery-hook"}},[e._v("#")]),e._v(" .marshallQuery(hook)")]),e._v(" "),t("p",[e._v("Converts from client/server side types (e.g. strings or moment dates) to basic JS types, which is usually required when querying the database.")]),e._v(" "),t("h3",{attrs:{id:"marshallcomparisonquery-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#marshallcomparisonquery-hook"}},[e._v("#")]),e._v(" .marshallComparisonQuery(hook)")]),e._v(" "),t("p",[e._v("Converts from client/server side comparison types (e.g. numbers) to basic JS types, which is usually required when querying the database. Applies to "),t("code",[e._v("$lt")]),e._v(", "),t("code",[e._v("$lte")]),e._v(", "),t("code",[e._v("$gt")]),e._v(" and "),t("code",[e._v("$gte")]),e._v(" operators.")]),e._v(" "),t("h3",{attrs:{id:"marshallspatialquery-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#marshallspatialquery-hook"}},[e._v("#")]),e._v(" .marshallSpatialQuery(hook)")]),e._v(" "),t("p",[e._v("Converts from client/server side spatial types (e.g. coordinates or numbers) to basic JS types, which is usually required when querying the database. Applies to "),t("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/query-geospatial/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MongoDB geospatial operators"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"processforecasttime-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#processforecasttime-hook"}},[e._v("#")]),e._v(" .processForecastTime(hook)")]),e._v(" "),t("p",[e._v("Find the nearest forecast date/time corresponding to a requested date/time or date/time range.")]),e._v(" "),t("h3",{attrs:{id:"processdata-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#processdata-hook"}},[e._v("#")]),e._v(" .processData(hook)")]),e._v(" "),t("p",[e._v("Discard or retrieve forecast data when required depending on the query parameters.")]),e._v(" "),t("h2",{attrs:{id:"logging"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logging"}},[e._v("#")]),e._v(" Logging")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/weacast/weacast/packages/core/blob/master/src/hooks/logger.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core source"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"log-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-hook"}},[e._v("#")]),e._v(" .log(hook)")]),e._v(" "),t("ul",[t("li",[e._v("Log error for each hook in error with error log level.")]),e._v(" "),t("li",[e._v("Log information for each hook ran with verbose (respectively debug for client) log level.")]),e._v(" "),t("li",[e._v("Log detailed information for each hook ran with debug (respectively trace for client) log level.")])]),e._v(" "),t("h2",{attrs:{id:"events"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[e._v("#")]),e._v(" Events")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/weacast/weacast-app/blob/master/src/hooks/events.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"emit-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#emit-hook"}},[e._v("#")]),e._v(" .emit(hook)")]),e._v(" "),t("p",[e._v("Emit an event named "),t("code",[e._v("{hook_type}Hook")]),e._v(" (e.g. "),t("code",[e._v("beforeHook")]),e._v(" or "),t("code",[e._v("afterHook")]),e._v(") for each hook ran, the payload of the event being the hook object.")]),e._v(" "),t("h2",{attrs:{id:"by-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#by-type"}},[e._v("#")]),e._v(" By type")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/api/application.html#application-hooks"}},[e._v("Application")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/api/forecast.html#forecast-model-hooks"}},[e._v("Forecast model service")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/api/element.html#forecast-element-hooks"}},[e._v("Forecast element service")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/api/probe.html#probe-hooks"}},[e._v("Probe service")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/api/probe.html#probe-results-hooks"}},[e._v("Probe results service")])],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);