(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{472:function(e,a,t){"use strict";t.r(a);var r=t(5),s=Object(r.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"forecast-data-loaders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#forecast-data-loaders"}},[e._v("#")]),e._v(" "),a("a",{attrs:{href:"https://github.com/weacast/weacast-loader",target:"_blank",rel:"noopener noreferrer"}},[e._v("Forecast data loaders"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("RouterLink",{attrs:{to:"/api/plugin.html"}},[e._v("Forecast model plugins")]),e._v(" are modules that need to be either integrated in a monolithic Weacast application or deployed as independent micro-service like applications to be interconnected, see the "),a("RouterLink",{attrs:{to:"/architecture/global-architecture.html#architecture-at-scale"}},[e._v("architecture section")]),e._v(".")],1),e._v(" "),a("p",[e._v("Because the most consuming part of a Weacast application is usually the gathering and processing of forecast model data, the "),a("a",{attrs:{href:"https://github.com/weacast/weacast-loader",target:"_blank",rel:"noopener noreferrer"}},[e._v("weacast-loader"),a("OutboundLink")],1),e._v(" module provides you with a set of download services available as Docker containers out-of-the-box. These services perform the same data processing workflow than the "),a("RouterLink",{attrs:{to:"/api/plugin.html#arpege"}},[e._v("ARPEGE")]),e._v(", "),a("RouterLink",{attrs:{to:"/api/plugin.html#arome"}},[e._v("AROME")]),e._v(" and "),a("RouterLink",{attrs:{to:"/api/plugin.html#gfs"}},[e._v("GFS")]),e._v(" plugins, based on "),a("a",{attrs:{href:"https://kalisio.github.io/krawler/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Krawler"),a("OutboundLink")],1),e._v(". This means that your Weacast application doesn't need to integrate these plugins anymore, the running download services will feed the database as usual in the background.")],1),e._v(" "),a("p",[e._v("The actual download services are built from generic Docker images containing required dependencies and functions used to generate a "),a("a",{attrs:{href:"https://kalisio.github.io/krawler/how-to-use-it/api.html#external-api",target:"_blank",rel:"noopener noreferrer"}},[e._v("Krawler download job"),a("OutboundLink")],1),e._v(" tailored to your forecast model and elements: "),a("a",{attrs:{href:"https://hub.docker.com/r/weacast/weacast-gfs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("weacast-gfs"),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://hub.docker.com/r/weacast/weacast-arpege/",target:"_blank",rel:"noopener noreferrer"}},[e._v("weacast-arpege"),a("OutboundLink")],1),e._v(" (which also covers "),a("a",{attrs:{href:"https://hub.docker.com/r/weacast/weacast-arome/",target:"_blank",rel:"noopener noreferrer"}},[e._v("weacast-arome"),a("OutboundLink")],1),e._v(" because the interface is similar).")]),e._v(" "),a("p",[e._v("You can use the provided Docker images with default model setups, for each model a different setup generates a different tag, e.g.:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("weacast/weacast-arpege:europe-latest")])]),e._v(" "),a("li",[a("code",[e._v("weacast/weacast-arpege:europe-1.4.0")])]),e._v(" "),a("li",[a("code",[e._v("weacast/weacast-arpege:world-latest")])]),e._v(" "),a("li",[a("code",[e._v("weacast/weacast-arpege:world-1.4.0")])])]),e._v(" "),a("p",[e._v("You can also build the Docker images containing the different configurations of your ARPEGE, AROME and GFS services:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Manually")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" weacast/weacast-arpege-world "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" dockerfile.arpege-world "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" weacast/weacast-gfs-world "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" dockerfile.gfs-world "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Using Docker compose file")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker-compose")]),e._v(" build weacast-arpege-world weacast-gfs-world "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),a("p",[e._v("Then you have to run it on your infrastructure:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Stop/remove previous instances if any")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker-compose")]),e._v(" stop weacast-arpege-world weacast-gfs-world "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker-compose")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" weacast-arpege-world weacast-gfs-world "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Launch new ones")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker-compose")]),e._v(" up "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" weacast-arpege-world weacast-gfs-world "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),a("p",[e._v("The loaders can archive all data using the "),a("a",{attrs:{href:"https://www.cogeo.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("COG"),a("OutboundLink")],1),e._v(" file format in a (compatible) AWS S3 bucket if you define the following environment variables:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("S3_ACCESS_KEY")]),e._v(" (access key - required)")]),e._v(" "),a("li",[a("code",[e._v("S3_SECRET_ACCESS_KEY")]),e._v(" (secret access key - required)")]),e._v(" "),a("li",[a("code",[e._v("S3_BUCKET")]),e._v(" (bucket name - required)")]),e._v(" "),a("li",[a("code",[e._v("S3_ENDPOINT")]),e._v(" (endpoint URL - optional)")])])])}),[],!1,null,null,null);a.default=s.exports}}]);