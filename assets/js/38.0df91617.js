(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{478:function(e,t,a){"use strict";a.r(t);var s=a(5),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"weacast-development"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#weacast-development"}},[e._v("#")]),e._v(" Weacast development")]),e._v(" "),t("p",[e._v("Weacast API is mainly powered by "),t("a",{attrs:{href:"https://feathersjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers"),t("OutboundLink")],1),e._v(" (version 5.x).\nWeacast demo app is mainly powered by "),t("a",{attrs:{href:"http://quasar-framework.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Quasar"),t("OutboundLink")],1),e._v(" on the frontend side (version 0.13.x).")]),e._v(" "),t("p",[e._v("If you are not familiar with those technologies and want to develop for Weacast, in addition to read the dedicated documentation, I recommand reading https://github.com/claustres/quasar-feathers-tutorial. Indeed, Weacast application demo is a template web application initially based on the "),t("a",{attrs:{href:"https://github.com/quasarframework/quasar-wrapper-feathersjs-api",target:"_blank",rel:"noopener noreferrer"}},[e._v("Quasar wrapper for Feathers"),t("OutboundLink")],1),e._v(", while Weacast plugins/modules are "),t("a",{attrs:{href:"https://docs.feathersjs.com/guides/advanced/creating-a-plugin.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers plugins"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"setup-your-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup-your-environment"}},[e._v("#")]),e._v(" Setup your environment")]),e._v(" "),t("h3",{attrs:{id:"prerequisites"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),t("h4",{attrs:{id:"install-node-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-node-js"}},[e._v("#")]),e._v(" Install Node.js")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node"),t("OutboundLink")],1),e._v(" is a server platform which runs JavaScript.\nIt's lightweight and efficient.\nIt has the largest ecosystem of open source libraries in the world.")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Default install."),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Specific versions."),t("OutboundLink")],1)])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("In order to be able to switch easily between different versions of Node.js we recommand to use a version manager like "),t("a",{attrs:{href:"https://github.com/tj/n",target:"_blank",rel:"noopener noreferrer"}},[e._v("n"),t("OutboundLink")],1),e._v("/"),t("a",{attrs:{href:"https://github.com/creationix/nvm",target:"_blank",rel:"noopener noreferrer"}},[e._v("nvm"),t("OutboundLink")],1),e._v(" under Linux/Mac or "),t("a",{attrs:{href:"https://github.com/coreybutler/nvm-windows",target:"_blank",rel:"noopener noreferrer"}},[e._v("nvm"),t("OutboundLink")],1),e._v(" under Windows.")])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("Weacast modules are expected to work with Node.js version 16.x")])]),e._v(" "),t("h4",{attrs:{id:"install-git"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-git"}},[e._v("#")]),e._v(" Install Git")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("git"),t("OutboundLink")],1),e._v(" is the version control system most frequently used in open source.\nThere are many resources available for installing it.")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.atlassian.com/git/tutorials/install-git#linux",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linux."),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.atlassian.com/git/tutorials/install-git#mac-os-x",target:"_blank",rel:"noopener noreferrer"}},[e._v("macOS."),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.atlassian.com/git/tutorials/install-git#windows",target:"_blank",rel:"noopener noreferrer"}},[e._v("Windows."),t("OutboundLink")],1)])]),e._v(" "),t("h4",{attrs:{id:"install-mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-mongodb"}},[e._v("#")]),e._v(" Install MongoDB")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mongo"),t("OutboundLink")],1),e._v(" is an open-source, document database designed for ease of development and scaling.")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.mongodb.com/manual/administration/install-on-linux/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linux."),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/",target:"_blank",rel:"noopener noreferrer"}},[e._v("macOS."),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Windows."),t("OutboundLink")],1)])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("Weacast modules are expected to work with MongoDB version 4.x")])]),e._v(" "),t("h4",{attrs:{id:"install-yarn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-yarn"}},[e._v("#")]),e._v(" Install Yarn")]),e._v(" "),t("p",[e._v("Due to some "),t("a",{attrs:{href:"http://codetunnel.io/npm-5-changes-to-npm-link/",target:"_blank",rel:"noopener noreferrer"}},[e._v("changes"),t("OutboundLink")],1),e._v(" in the way "),t("code",[e._v("npm")]),e._v(" manages linked modules we prefer to use "),t("a",{attrs:{href:"https://yarnpkg.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Yarn"),t("OutboundLink")],1),e._v(" as a package manager.")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://yarnpkg.com/en/docs/install",target:"_blank",rel:"noopener noreferrer"}},[e._v("Install Yarn"),t("OutboundLink")],1),e._v(" on your platform.")]),e._v(" "),t("h3",{attrs:{id:"weacast"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#weacast"}},[e._v("#")]),e._v(" Weacast")]),e._v(" "),t("p",[e._v("While it is a WIP and not yet pushed to NPM, or when developing, please use the following process.")]),e._v(" "),t("p",[e._v("First clone and install the Weacast monoreo, "),t("a",{attrs:{href:"https://lerna.js.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("lerna"),t("OutboundLink")],1),e._v(" will "),t("a",{attrs:{href:"https://docs.npmjs.com/cli/link",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),t("OutboundLink")],1),e._v(" all modules together:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("// Clone and "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("link")]),e._v(" the modules\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/weacast/weacast.git\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" weacast\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),t("p",[e._v("Then clone and install the Weacast demo app repository:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("// Clone and "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("link")]),e._v(" client to weacast app\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/weacast/weacast.git\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" weacast-app\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])])]),t("h2",{attrs:{id:"develop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#develop"}},[e._v("#")]),e._v(" Develop")]),e._v(" "),t("h3",{attrs:{id:"weacast-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#weacast-2"}},[e._v("#")]),e._v(" Weacast")]),e._v(" "),t("h4",{attrs:{id:"running-for-development"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-for-development"}},[e._v("#")]),e._v(" Running for development")]),e._v(" "),t("p",[e._v("Run the server-side app (from "),t("code",[e._v("weacast/packages/api")]),e._v(" project folder): "),t("code",[e._v("$ npm run dev")])]),e._v(" "),t("p",[e._v("Then run the frontend app (from "),t("code",[e._v("weacast-app")]),e._v(" root project folder): "),t("code",[e._v("$ npm run dev")])]),e._v(" "),t("p",[e._v("Then point your browser to "),t("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[e._v("localhost:8080"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"building-for-production"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#building-for-production"}},[e._v("#")]),e._v(" Building for production")]),e._v(" "),t("p",[e._v("Build the server-side app (from "),t("code",[e._v("weacast/packages/api")]),e._v(" project folder): "),t("code",[e._v("$ npm run compile")])]),e._v(" "),t("p",[e._v("Then build the frontend app (from "),t("code",[e._v("weacast-app")]),e._v(" root project folder): "),t("code",[e._v("$ npm run build")]),e._v(".")]),e._v(" "),t("p",[e._v("This generates a "),t("code",[e._v("dist")]),e._v(" folder "),t("strong",[e._v("to be copied into")]),e._v(" the "),t("code",[e._v("weacast/packages/api")]),e._v(" root project folder.")]),e._v(" "),t("h4",{attrs:{id:"running-in-production"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-in-production"}},[e._v("#")]),e._v(" Running in production")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("Make sure you built your app first")])]),e._v(" "),t("p",[e._v("Run the server-side app (from "),t("code",[e._v("weacast/packages/api")]),e._v(" root project folder), this will also serve the frontend app : "),t("code",[e._v("$ npm run prod")])]),e._v(" "),t("p",[e._v("Then point your browser to "),t("a",{attrs:{href:"http://localhost:8081",target:"_blank",rel:"noopener noreferrer"}},[e._v("localhost:8081"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"running-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-test"}},[e._v("#")]),e._v(" Running test")]),e._v(" "),t("p",[e._v("Run the server-side tests (from "),t("code",[e._v("weacast")]),e._v(" root project folder): "),t("code",[e._v("$ npm run test")]),e._v("\nThis will lint and fix issues in the code according to "),t("a",{attrs:{href:"https://github.com/feross/standard",target:"_blank",rel:"noopener noreferrer"}},[e._v("JS standard"),t("OutboundLink")],1),e._v(", then execute tests using "),t("a",{attrs:{href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mocha"),t("OutboundLink")],1),e._v(" and compute code coverage using "),t("a",{attrs:{href:"https://github.com/bcoe/c8",target:"_blank",rel:"noopener noreferrer"}},[e._v("c8"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"debug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debug"}},[e._v("#")]),e._v(" Debug")]),e._v(" "),t("p",[e._v("Use "),t("a",{attrs:{href:"https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chrome DevTools"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"testing-docker-images"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#testing-docker-images"}},[e._v("#")]),e._v(" Testing Docker images")]),e._v(" "),t("p",[e._v("Because Weacast API and demo application are also released as Docker images, you can build it manually like this in development mode (i.e. with all modules linked to their "),t("code",[e._v("master")]),e._v(" branch version):")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("// API\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" packages/api\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" dockerfile.dev "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" weacast/weacast-api:dev "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n// Demo application\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" weacast-app\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" dockerfile.dev "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" weacast/weacast:dev "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("The demo application image depends on the weacast API image so that the build order is important.")])]),e._v(" "),t("p",[e._v("Then test it like this:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// API\ncd packages/api\ndocker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d\n// Demo application\ncd weacast-app\ndocker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d\n")])])]),t("p",[e._v("You can release it manually if you'd like as current dev version to share progress with others:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" login\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push weacast/weacast:dev\n")])])]),t("p",[t("strong",[e._v("However, our Travis CI should build the development images for you as you commit")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("When building the image all modules are retrieved from their respective repository ("),t("code",[e._v("master")]),e._v(" branch), only the local source code of the demo web app is pushed into the image.")]),e._v(" "),t("p",[e._v("This requires you to have a DockerHub account and be a team member of the Weacast organization, if you'd like to become a maintainer please tell us")])]),e._v(" "),t("h3",{attrs:{id:"plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[e._v("#")]),e._v(" Plugins")]),e._v(" "),t("p",[e._v("Weacast plugins are "),t("a",{attrs:{href:"https://docs.feathersjs.com/guides/advanced/creating-a-plugin.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers plugins"),t("OutboundLink")],1),e._v(", so you will find most of the required information in the linked Feathers documentation.")]),e._v(" "),t("h4",{attrs:{id:"running-tests"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-tests"}},[e._v("#")]),e._v(" Running tests")]),e._v(" "),t("p",[e._v("To run the module tests including linting and coverage : "),t("code",[e._v("$ npm run test")])]),e._v(" "),t("p",[e._v("To speed-up things simply run the tests with: "),t("code",[e._v("$ npm run mocha")])]),e._v(" "),t("p",[e._v("To speed-up things even more run a single test suite with: "),t("code",[e._v('$ npm run mocha -- --grep "test suite name"')])]),e._v(" "),t("h2",{attrs:{id:"publish"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#publish"}},[e._v("#")]),e._v(" Publish")]),e._v(" "),t("h3",{attrs:{id:"modules-and-plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules-and-plugins"}},[e._v("#")]),e._v(" Modules and plugins")]),e._v(" "),t("p",[e._v("We rely on "),t("a",{attrs:{href:"https://lerna.js.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lerna"),t("OutboundLink")],1),e._v(" to handle the publishing process, including version number update, changelog generation based on conventional commits, etc. It should take care of updating the version of all dependent plugins to the latest version published. Use the following command:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" run publish\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("This requires you to have a NPM and GitHub account and be a team member of the Weacast organization, if you'd like to become a maintainer please tell us.")])]),e._v(" "),t("h3",{attrs:{id:"docker-images"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-images"}},[e._v("#")]),e._v(" Docker images")]),e._v(" "),t("p",[e._v("Because Weacast API and demo application are also released as Docker images, you can build it manually like this in release mode (i.e. with all modules linked to their latest version):")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("// API\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" packages/api\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" weacast/weacast-api "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n// Demo application\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" weacast-app\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" weacast/weacast "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("The demo application image depends on the weacast API image so that the build order is important.")])]),e._v(" "),t("p",[e._v("Then release it as latest version:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" login\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push weacast/weacast-api\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push weacast/weacast\n")])])]),t("p",[e._v("And tag it ("),t("code",[e._v("version_tag")]),e._v(" being the current version number like "),t("code",[e._v("1.1.2")]),e._v(")")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" tag weacast/weacast-api weacast/weacast-api:version_tag\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push weacast/weacast-api:version_tag\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" tag weacast/weacast weacast/weacast:version_tag\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push weacast/weacast:version_tag\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("This requires you to have a DockerHub account and be a team member of the Weacast organization, if you'd like to become a maintainer please tell us")])]),e._v(" "),t("p",[t("strong",[e._v("However, our Travis CI should build the images for you as you push the tag of the release")])])])}),[],!1,null,null,null);t.default=r.exports}}]);